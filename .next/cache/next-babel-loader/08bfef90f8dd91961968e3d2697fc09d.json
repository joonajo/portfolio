{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Cover from '../../components/Cover/Cover';\nimport Content from '../../components/Content/Content';\nimport { PortfolioContext, TPortfolioActionTypes } from '../../context/portfolioContext';\nimport Layout from '../../components/UI/Layout/Layout';\nimport Loading from '../../components/UI/Loading/Loading';\n\nconst css = require('./Home.module.css');\n\nconst Home = () => {\n  const [bgLoaded, setBgLoaded] = React.useState(false);\n  const [loading, setLoading] = React.useState(true);\n  const [ready, setReady] = React.useState(false);\n  React.useEffect(() => {\n    if (bgLoaded && !loading) setReady(true);\n  }, [bgLoaded, loading]);\n  React.useEffect(() => {\n    // check if bg image is already cached\n    // if yes, set as loaded\n    const image = new Image();\n    image.src = '/images/palm.png';\n    if (image.complete) setBgLoaded(true);\n  }, []);\n  const portfolioContext = React.useContext(PortfolioContext);\n  const portfolioState = portfolioContext.state;\n  const portfolioDispatch = portfolioContext.dispatch;\n  React.useEffect(() => {\n    if (portfolioState && portfolioDispatch) {\n      if (portfolioState.items.length === 0) {\n        const baseURL = 'https://joonajo-portfolio.firebaseio.com/items.json';\n        const newItems = [];\n        fetch(baseURL, {\n          method: 'get'\n        }).then(response => response.json()).then(data => {\n          if (data) {\n            _Object$keys(data).forEach(item => {\n              newItems.push(data[item]);\n            });\n\n            portfolioDispatch({\n              type: TPortfolioActionTypes.SET_ITEMS,\n              payload: newItems\n            });\n          }\n\n          setLoading(false);\n        });\n      }\n    }\n  }, [portfolioState]);\n  return __jsx(React.Fragment, null, __jsx(Loading, {\n    show: !ready,\n    slideout: true\n  }), __jsx(Layout, null, __jsx(Cover, {\n    show: ready,\n    load: () => setBgLoaded(true)\n  }), bgLoaded && !loading && __jsx(Content, null)));\n};\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}